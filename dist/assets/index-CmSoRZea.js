var Ct=Object.defineProperty;var Gt=(e,t,n)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $=(e,t,n)=>Gt(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))i(_);new MutationObserver(_=>{for(const r of _)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(_){const r={};return _.integrity&&(r.integrity=_.integrity),_.referrerPolicy&&(r.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?r.credentials="include":_.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(_){if(_.ep)return;_.ep=!0;const r=n(_);fetch(_.href,r)}})();var j,v,vt,H,st,xt,bt,wt,et,J,Q,G={},kt=[],Tt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,z=Array.isArray;function S(e,t){for(var n in t)e[n]=t[n];return e}function nt(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Rt(e,t,n){var i,_,r,l={};for(r in t)r=="key"?i=t[r]:r=="ref"?_=t[r]:l[r]=t[r];if(arguments.length>2&&(l.children=arguments.length>3?j.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)l[r]===void 0&&(l[r]=e.defaultProps[r]);return F(e,l,i,_,null)}function F(e,t,n,i,_){var r={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:_??++vt,__i:-1,__u:0};return _==null&&v.vnode!=null&&v.vnode(r),r}function X(e){return e.children}function I(e,t){this.props=e,this.context=t}function M(e,t){if(t==null)return e.__?M(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?M(e):null}function $t(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return $t(e)}}function lt(e){(!e.__d&&(e.__d=!0)&&H.push(e)&&!B.__r++||st!=v.debounceRendering)&&((st=v.debounceRendering)||xt)(B)}function B(){for(var e,t,n,i,_,r,l,h=1;H.length;)H.length>h&&H.sort(bt),e=H.shift(),h=H.length,e.__d&&(n=void 0,i=void 0,_=(i=(t=e).__v).__e,r=[],l=[],t.__P&&((n=S({},i)).__v=i.__v+1,v.vnode&&v.vnode(n),it(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[_]:null,r,_??M(i),!!(32&i.__u),l),n.__v=i.__v,n.__.__k[n.__i]=n,Ot(r,n,l),i.__e=i.__=null,n.__e!=_&&$t(n)));B.__r=0}function At(e,t,n,i,_,r,l,h,u,s,p){var o,c,f,g,x,y,d,m=i&&i.__k||kt,k=t.length;for(u=Ut(n,t,m,u,k),o=0;o<k;o++)(f=n.__k[o])!=null&&(c=f.__i==-1?G:m[f.__i]||G,f.__i=o,y=it(e,f,c,_,r,l,h,u,s,p),g=f.__e,f.ref&&c.ref!=f.ref&&(c.ref&&rt(c.ref,null,f),p.push(f.ref,f.__c||g,f)),x==null&&g!=null&&(x=g),(d=!!(4&f.__u))||c.__k===f.__k?u=St(f,u,e,d):typeof f.type=="function"&&y!==void 0?u=y:g&&(u=g.nextSibling),f.__u&=-7);return n.__e=x,u}function Ut(e,t,n,i,_){var r,l,h,u,s,p=n.length,o=p,c=0;for(e.__k=new Array(_),r=0;r<_;r++)(l=t[r])!=null&&typeof l!="boolean"&&typeof l!="function"?(typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?l=e.__k[r]=F(null,l,null,null,null):z(l)?l=e.__k[r]=F(X,{children:l},null,null,null):l.constructor===void 0&&l.__b>0?l=e.__k[r]=F(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):e.__k[r]=l,u=r+c,l.__=e,l.__b=e.__b+1,h=null,(s=l.__i=Lt(l,n,u,o))!=-1&&(o--,(h=n[s])&&(h.__u|=2)),h==null||h.__v==null?(s==-1&&(_>p?c--:_<p&&c++),typeof l.type!="function"&&(l.__u|=4)):s!=u&&(s==u-1?c--:s==u+1?c++:(s>u?c--:c++,l.__u|=4))):e.__k[r]=null;if(o)for(r=0;r<p;r++)(h=n[r])!=null&&!(2&h.__u)&&(h.__e==i&&(i=M(h)),Pt(h,h));return i}function St(e,t,n,i){var _,r;if(typeof e.type=="function"){for(_=e.__k,r=0;_&&r<_.length;r++)_[r]&&(_[r].__=e,t=St(_[r],t,n,i));return t}e.__e!=t&&(i&&(t&&e.type&&!t.parentNode&&(t=M(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Lt(e,t,n,i){var _,r,l,h=e.key,u=e.type,s=t[n],p=s!=null&&(2&s.__u)==0;if(s===null&&h==null||p&&h==s.key&&u==s.type)return n;if(i>(p?1:0)){for(_=n-1,r=n+1;_>=0||r<t.length;)if((s=t[l=_>=0?_--:r++])!=null&&!(2&s.__u)&&h==s.key&&u==s.type)return l}return-1}function ht(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Tt.test(t)?n:n+"px"}function L(e,t,n,i,_){var r,l;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||ht(e.style,t,"");if(n)for(t in n)i&&n[t]==i[t]||ht(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(wt,"$1")),l=t.toLowerCase(),t=l in e||t=="onFocusOut"||t=="onFocusIn"?l.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i?n.u=i.u:(n.u=et,e.addEventListener(t,r?Q:J,r)):e.removeEventListener(t,r?Q:J,r);else{if(_=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function ct(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=et++;else if(t.t<n.u)return;return n(v.event?v.event(t):t)}}}function it(e,t,n,i,_,r,l,h,u,s){var p,o,c,f,g,x,y,d,m,k,O,R,N,ot,U,C,K,A=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),r=[h=t.__e=n.__e]),(p=v.__b)&&p(t);t:if(typeof A=="function")try{if(d=t.props,m="prototype"in A&&A.prototype.render,k=(p=A.contextType)&&i[p.__c],O=p?k?k.props.value:p.__:i,n.__c?y=(o=t.__c=n.__c).__=o.__E:(m?t.__c=o=new A(d,O):(t.__c=o=new I(d,O),o.constructor=A,o.render=It),k&&k.sub(o),o.state||(o.state={}),o.__n=i,c=o.__d=!0,o.__h=[],o._sb=[]),m&&o.__s==null&&(o.__s=o.state),m&&A.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=S({},o.__s)),S(o.__s,A.getDerivedStateFromProps(d,o.__s))),f=o.props,g=o.state,o.__v=t,c)m&&A.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),m&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(m&&A.getDerivedStateFromProps==null&&d!==f&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(d,O),t.__v==n.__v||!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(d,o.__s,O)===!1){for(t.__v!=n.__v&&(o.props=d,o.state=o.__s,o.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(P){P&&(P.__=t)}),R=0;R<o._sb.length;R++)o.__h.push(o._sb[R]);o._sb=[],o.__h.length&&l.push(o);break t}o.componentWillUpdate!=null&&o.componentWillUpdate(d,o.__s,O),m&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(f,g,x)})}if(o.context=O,o.props=d,o.__P=e,o.__e=!1,N=v.__r,ot=0,m){for(o.state=o.__s,o.__d=!1,N&&N(t),p=o.render(o.props,o.state,o.context),U=0;U<o._sb.length;U++)o.__h.push(o._sb[U]);o._sb=[]}else do o.__d=!1,N&&N(t),p=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++ot<25);o.state=o.__s,o.getChildContext!=null&&(i=S(S({},i),o.getChildContext())),m&&!c&&o.getSnapshotBeforeUpdate!=null&&(x=o.getSnapshotBeforeUpdate(f,g)),C=p,p!=null&&p.type===X&&p.key==null&&(C=Ht(p.props.children)),h=At(e,z(C)?C:[C],t,n,i,_,r,l,h,u,s),o.base=t.__e,t.__u&=-161,o.__h.length&&l.push(o),y&&(o.__E=o.__=null)}catch(P){if(t.__v=null,u||r!=null)if(P.then){for(t.__u|=u?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;r[r.indexOf(h)]=null,t.__e=h}else{for(K=r.length;K--;)nt(r[K]);Z(t)}else t.__e=n.__e,t.__k=n.__k,P.then||Z(t);v.__e(P,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):h=t.__e=Ft(n.__e,t,n,i,_,r,l,u,s);return(p=v.diffed)&&p(t),128&t.__u?void 0:h}function Z(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Z)}function Ot(e,t,n){for(var i=0;i<n.length;i++)rt(n[i],n[++i],n[++i]);v.__c&&v.__c(t,e),e.some(function(_){try{e=_.__h,_.__h=[],e.some(function(r){r.call(_)})}catch(r){v.__e(r,_.__v)}})}function Ht(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:z(e)?e.map(Ht):S({},e)}function Ft(e,t,n,i,_,r,l,h,u){var s,p,o,c,f,g,x,y=n.props||G,d=t.props,m=t.type;if(m=="svg"?_="http://www.w3.org/2000/svg":m=="math"?_="http://www.w3.org/1998/Math/MathML":_||(_="http://www.w3.org/1999/xhtml"),r!=null){for(s=0;s<r.length;s++)if((f=r[s])&&"setAttribute"in f==!!m&&(m?f.localName==m:f.nodeType==3)){e=f,r[s]=null;break}}if(e==null){if(m==null)return document.createTextNode(d);e=document.createElementNS(_,m,d.is&&d),h&&(v.__m&&v.__m(t,r),h=!1),r=null}if(m==null)y===d||h&&e.data==d||(e.data=d);else{if(r=r&&j.call(e.childNodes),!h&&r!=null)for(y={},s=0;s<e.attributes.length;s++)y[(f=e.attributes[s]).name]=f.value;for(s in y)if(f=y[s],s!="children"){if(s=="dangerouslySetInnerHTML")o=f;else if(!(s in d)){if(s=="value"&&"defaultValue"in d||s=="checked"&&"defaultChecked"in d)continue;L(e,s,null,f,_)}}for(s in d)f=d[s],s=="children"?c=f:s=="dangerouslySetInnerHTML"?p=f:s=="value"?g=f:s=="checked"?x=f:h&&typeof f!="function"||y[s]===f||L(e,s,f,y[s],_);if(p)h||o&&(p.__html==o.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(o&&(e.innerHTML=""),At(t.type=="template"?e.content:e,z(c)?c:[c],t,n,i,m=="foreignObject"?"http://www.w3.org/1999/xhtml":_,r,l,r?r[0]:n.__k&&M(n,0),h,u),r!=null)for(s=r.length;s--;)nt(r[s]);h||(s="value",m=="progress"&&g==null?e.removeAttribute("value"):g!=null&&(g!==e[s]||m=="progress"&&!g||m=="option"&&g!=y[s])&&L(e,s,g,y[s],_),s="checked",x!=null&&x!=e[s]&&L(e,s,x,y[s],_))}return e}function rt(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(_){v.__e(_,n)}}function Pt(e,t,n){var i,_;if(v.unmount&&v.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||rt(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){v.__e(r,t)}i.base=i.__P=null}if(i=e.__k)for(_=0;_<i.length;_++)i[_]&&Pt(i[_],t,n||typeof e.type!="function");n||nt(e.__e),e.__c=e.__=e.__e=void 0}function It(e,t,n){return this.constructor(e,n)}function Wt(e,t,n){var i,_,r,l;t==document&&(t=document.documentElement),v.__&&v.__(e,t),_=(i=!1)?null:t.__k,r=[],l=[],it(t,e=t.__k=Rt(X,null,[e]),_||G,G,t.namespaceURI,_?null:t.firstChild?j.call(t.childNodes):null,r,_?_.__e:t.firstChild,i,l),Ot(r,e,l)}j=kt.slice,v={__e:function(e,t,n,i){for(var _,r,l;t=t.__;)if((_=t.__c)&&!_.__)try{if((r=_.constructor)&&r.getDerivedStateFromError!=null&&(_.setState(r.getDerivedStateFromError(e)),l=_.__d),_.componentDidCatch!=null&&(_.componentDidCatch(e,i||{}),l=_.__d),l)return _.__E=_}catch(h){e=h}throw e}},vt=0,I.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=S({},this.state),typeof e=="function"&&(e=e(S({},n),this.props)),e&&S(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),lt(this))},I.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),lt(this))},I.prototype.render=X,H=[],xt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,bt=function(e,t){return e.__v.__b-t.__v.__b},B.__r=0,wt=/(PointerCapture)$|Capture$/i,et=0,J=ct(!1),Q=ct(!0);var Bt=0;function a(e,t,n,i,_,r){t||(t={});var l,h,u=t;if("ref"in u)for(h in u={},t)h=="ref"?l=t[h]:u[h]=t[h];var s={type:e,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Bt,__i:-1,__u:0,__source:_,__self:r};if(typeof e=="function"&&(l=e.defaultProps))for(h in l)u[h]===void 0&&(u[h]=l[h]);return v.vnode&&v.vnode(s),s}var T,b,V,at,D=0,Et=[],w=v,ft=w.__b,ut=w.__r,pt=w.diffed,dt=w.__c,mt=w.unmount,gt=w.__;function _t(e,t){w.__h&&w.__h(b,e,D||t),D=0;var n=b.__H||(b.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function E(e){return D=1,Dt(Nt,e)}function Dt(e,t,n){var i=_t(T++,2);if(i.t=e,!i.__c&&(i.__=[Nt(void 0,t),function(h){var u=i.__N?i.__N[0]:i.__[0],s=i.t(u,h);u!==s&&(i.__N=[s,i.__[1]],i.__c.setState({}))}],i.__c=b,!b.__f)){var _=function(h,u,s){if(!i.__c.__H)return!0;var p=i.__c.__H.__.filter(function(c){return!!c.__c});if(p.every(function(c){return!c.__N}))return!r||r.call(this,h,u,s);var o=i.__c.props!==h;return p.forEach(function(c){if(c.__N){var f=c.__[0];c.__=c.__N,c.__N=void 0,f!==c.__[0]&&(o=!0)}}),r&&r.call(this,h,u,s)||o};b.__f=!0;var r=b.shouldComponentUpdate,l=b.componentWillUpdate;b.componentWillUpdate=function(h,u,s){if(this.__e){var p=r;r=void 0,_(h,u,s),r=p}l&&l.call(this,h,u,s)},b.shouldComponentUpdate=_}return i.__N||i.__}function jt(e,t){var n=_t(T++,3);!w.__s&&Mt(n.__H,t)&&(n.__=e,n.u=t,b.__H.__h.push(n))}function zt(e){return D=5,Xt(function(){return{current:e}},[])}function Xt(e,t){var n=_t(T++,7);return Mt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function qt(){for(var e;e=Et.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(W),e.__H.__h.forEach(tt),e.__H.__h=[]}catch(t){e.__H.__h=[],w.__e(t,e.__v)}}w.__b=function(e){b=null,ft&&ft(e)},w.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),gt&&gt(e,t)},w.__r=function(e){ut&&ut(e),T=0;var t=(b=e.__c).__H;t&&(V===b?(t.__h=[],b.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(W),t.__h.forEach(tt),t.__h=[],T=0)),V=b},w.diffed=function(e){pt&&pt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Et.push(t)!==1&&at===w.requestAnimationFrame||((at=w.requestAnimationFrame)||Kt)(qt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),V=b=null},w.__c=function(e,t){t.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(i){return!i.__||tt(i)})}catch(i){t.some(function(_){_.__h&&(_.__h=[])}),t=[],w.__e(i,n.__v)}}),dt&&dt(e,t)},w.unmount=function(e){mt&&mt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{W(i)}catch(_){t=_}}),n.__H=void 0,t&&w.__e(t,n.__v))};var yt=typeof requestAnimationFrame=="function";function Kt(e){var t,n=function(){clearTimeout(i),yt&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,35);yt&&(t=requestAnimationFrame(n))}function W(e){var t=b,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),b=t}function tt(e){var t=b;e.__c=e.__(),b=t}function Mt(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Nt(e,t){return typeof t=="function"?t(e):t}function Vt(e){const t=e.split(/\s+/),n=()=>{let c=t.shift();for(;c==="/*"||c==="/**";){do c=t.shift();while(c!=="*/");c=t.shift()}if(c===void 0)throw new Error("Unexpected end of tokens");return c},i=(...c)=>{const f=n();if(!c.includes(f))throw new Error(`Expected token "${c}", got "${f}"`);return f},_=(c=n())=>{const f=parseInt(c);if(isNaN(f))throw new Error(`Expected number, got "${c}"`);return f};let r="";const l=[],h=[];let u=0,s=0,p=0,o=n();for(;t.length>0;)if(o.endsWith("Bitmaps[]"))for(i("PROGMEM","="),i("{"),o=n();o!=="};";)o.endsWith(",")&&(o=o.slice(0,-1)),o.startsWith("0x")&&l.push(parseInt(o,16)),o=n();else if(o.endsWith("Glyphs[]"))for(i("PROGMEM","="),i("{"),o=n();o!=="};";){if(o==="{"){const c=_(),f=_(),g=_(),x=_(),y=_(),d=_();h.push({offset:c,width:f,height:g,xAdvance:x,xOffset:y,yOffset:d}),i("}","},")}o=n()}else if(o==="GFXfont"){for(r=n(),i("PROGMEM","="),i("{"),o=n();!o.endsWith("Glyphs,");)o=n();u=_(),s=_(),p=_(),i("};"),o=n()}else o=n();return{name:r,bitmaps:l,glyphs:h,first:u,last:s,yAdvance:p}}class q{constructor(t){$(this,"_first");$(this,"_last");$(this,"name");$(this,"yAdvance");$(this,"glyphs");$(this,"_maxHeight",0);this._first=t.first,this._last=t.last,this.name=t.name,this.yAdvance=t.yAdvance,this.glyphs=t.glyphs.map((n,i)=>new Y(String.fromCharCode(i+t.first),t.bitmaps.slice(n.offset),n)),this.updateMaxHeight()}updateMaxHeight(){this._maxHeight=Math.max(...this.glyphs.map(t=>t.height),this.yAdvance)}get maxHeight(){return this._maxHeight}static fromString(t){return new q(Vt(t))}get first(){return this._first}set first(t){t<this._first?this.glyphs.unshift(...new Array(this._first-t).fill(0).map((n,i)=>new Y(String.fromCharCode(t+i)))):t>this._first&&this.glyphs.splice(0,t-this._first),this._first=t,this.updateMaxHeight()}get last(){return this._last}set last(t){t>this._last?this.glyphs.push(...new Array(t-this._last).fill(0).map((n,i)=>new Y(String.fromCharCode(this._last+1+i)))):t<this._last&&this.glyphs.splice(t-this._first+1),this._last=t,this.updateMaxHeight()}getGlyph(t){return t>=this.first&&t<=this.last?this.glyphs[t-this.first]:null}serialize(){let t=0;const n=this.glyphs.map(s=>s.serialize()).map(s=>({width:s.width.toString(),height:s.height.toString(),bytes:s.bytes.map(p=>`0x${p.toString(16).padStart(2,"0")}`),xAdvance:s.xAdvance.toString(),xOffset:s.xOffset.toString(),yOffset:s.yOffset.toString(),char:s.char,code:s.char.charCodeAt(0).toString(16).padStart(2,"0"),offset:(t+=s.bytes.length)-s.bytes.length})),i=t.toString().length,_=Math.max(...n.map(s=>s.width.length)),r=Math.max(...n.map(s=>s.height.length)),l=Math.max(...n.map(s=>s.xAdvance.length)),h=Math.max(...n.map(s=>s.xOffset.length)),u=Math.max(...n.map(s=>s.yOffset.length));return`
const uint8_t ${this.name}Bitmaps[] PROGMEM = {
${n.filter(s=>s.bytes.length>0).map(s=>`  ${s.bytes.join(", ")},`).join(`
`)}
};

const GFXglyph ${this.name}Glyphs[] PROGMEM = {
${n.map(s=>`  {  ${s.offset.toString().padStart(i," ")},  ${s.width.padStart(_," ")},  ${s.height.padStart(r," ")},  ${s.xAdvance.padStart(l," ")},  ${s.xOffset.padStart(h," ")},  ${s.yOffset.padStart(u," ")}, }, /* 0x${s.code} '${s.char}' */`).join(`
`)}
};

const GFXfont ${this.name} PROGMEM = {
  (uint8_t  *)${this.name}Bitmaps,
  (GFXglyph *)${this.name}Glyphs,
  0x${this.first.toString(16)}, 0x${this.last.toString(16)}, ${this.yAdvance} };
    `.trim()}}class Y{constructor(t,n=[],i={height:0,width:0,offset:0,xAdvance:0,xOffset:0,yOffset:0}){$(this,"char");$(this,"glyph");$(this,"gfx");$(this,"xAdvance");$(this,"xOffset");$(this,"yOffset");this.char=t,this.glyph=i,this.gfx=[],this.parseBytes(n),this.xAdvance=i.xAdvance,this.xOffset=i.xOffset,this.yOffset=i.yOffset}parseBytes(t){this.gfx=[];let n=0,i=0,_=-1;for(let r=0;r<this.glyph.height;r++){const l=[];for(let h=0;h<this.glyph.width;h++){_<0&&(_=7,i=t[n++]);const u=!!(i>>_&1);l.push(u),_--}this.gfx.push(l)}}getBytes(){return Yt(this.gfx.flat())}get width(){return this.glyph.width}set width(t){if(t<0)throw new Error("Width must be a positive number");if(t<this.glyph.width)for(let n=0;n<this.glyph.height;n++)this.gfx[n].splice(t);else if(t>this.glyph.width)for(let n=0;n<this.glyph.height;n++)for(;this.gfx[n].length<t;)this.gfx[n].push(!1);this.glyph.width=t}get height(){return this.glyph.height}set height(t){if(t<0)throw new Error("Height must be a positive number");if(t<this.glyph.height)this.gfx.splice(t);else if(t>this.glyph.height)for(;this.gfx.length<t;)this.gfx.push(new Array(this.glyph.width).fill(!1));this.glyph.height=t}getPixel(t,n){return t<0||n<0||t>=this.width||n>=this.height?!1:this.gfx[n][t]}setPixel(t,n,i){t<0||n<0||t>=this.width||n>=this.height||(this.gfx[n][t]=i)}serialize(){return{bytes:this.getBytes(),width:this.width,height:this.height,xAdvance:this.xAdvance,xOffset:this.xOffset,yOffset:this.yOffset,char:this.char}}}function Yt(e){const t=[];for(let n=0;n<e.length;n+=8){let i=0;for(let _=0;_<8;_++)i|=(e[n+_]?1:0)<<7-_;t.push(i)}return t}function Jt({initialFont:e}){const[t,n]=E(e),[i,_]=E([]),[r,l]=E(0),h=c=>{var y;const g=(y=c.target.files)==null?void 0:y[0];if(!g)return;const x=new FileReader;x.onload=d=>{var k;const m=(k=d.target)==null?void 0:k.result;typeof m=="string"&&n(q.fromString(m))},x.readAsText(g)},u=()=>{if(!t)return;const c=t.serialize(),f=new Blob([c],{type:"text/plain"}),g=URL.createObjectURL(f),x=document.createElement("a");x.href=g,x.download=`${t.name||"font"}.h`,x.click(),URL.revokeObjectURL(g)},s=c=>{_(i.filter(f=>f!==c))},p=c=>{i.includes(c)||_([...i,c])},o=()=>{l(c=>c+1)};return a("main",{class:"app",children:[a("h1",{children:"Font editor"}),a("div",{children:[a("button",{onClick:c=>{var f;return(f=c.target.nextElementSibling)==null?void 0:f.dispatchEvent(new Event("click",{bubbles:!0}))},children:[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"17 8 12 3 7 8"}),a("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),"Upload font file"]}),a("input",{type:"file",accept:".h,.txt",onChange:h,style:"display: none"}),a("button",{onClick:u,children:[a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),a("polyline",{points:"7 10 12 15 17 10"}),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Download font file"]})]}),t&&a(ne,{font:t,refreshKey:r}),t&&a(Qt,{font:t,onSelectGlyph:p}),a("div",{class:"glyph-editors",children:i.map(c=>a(te,{glyph:c,onClose:()=>s(c),onChange:o},c.char))})]})}function Qt({font:e,onSelectGlyph:t}){return a("fieldset",{children:[a("legend",{children:"Font Settings"}),a("label",{children:[a("span",{children:"Name"}),a("input",{type:"text",name:"name",value:e.name,onInput:n=>{e.name=n.target.value}})]}),a("label",{children:[a("span",{children:"First character"}),a("input",{type:"number",name:"first-char",value:e.first,onInput:n=>{e.first=n.target.valueAsNumber},min:"1",max:"255"})]}),a("label",{children:[a("span",{children:"Last character"}),a("input",{type:"number",name:"last-char",value:e.last,onInput:n=>{e.last=n.target.valueAsNumber},min:"1",max:"255"})]}),a(Zt,{font:e,onSelectGlyph:t})]})}function Zt({font:e,onSelectGlyph:t}){return a("table",{id:"characters",children:a("tbody",{children:[a("tr",{children:[a("th",{}),new Array(16).fill(0).map((n,i)=>a("th",{children:`_${i.toString(16)}`},i))]}),new Array(16).fill(0).map((n,i)=>a("tr",{children:[a("th",{children:`${i.toString(16)}_`}),new Array(16).fill(0).map((_,r)=>{const l=e.getGlyph(i*16+r);return a("td",{onClick:()=>l&&t(l),style:{background:l?l.width===0||l.height===0?"#ccc":"#cec":"#ecc"},children:(l==null?void 0:l.char)??""},r)})]},i))]})})}function te({glyph:e,onClose:t,onChange:n}){const[,i]=E(0),_=()=>{i(r=>r+1),n==null||n()};return a("fieldset",{children:[a("legend",{children:["Glyph Editor",a("button",{class:"close-btn",onClick:t,children:a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[a("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a("label",{children:[a("span",{children:"Width"}),a("input",{type:"number",name:"width",value:e.width,onInput:r=>{e.width=r.target.valueAsNumber,_()},min:"1",max:"255"})]}),a("label",{children:[a("span",{children:"Height"}),a("input",{type:"number",name:"height",value:e.height,onInput:r=>{e.height=r.target.valueAsNumber,_()},min:"1",max:"255"})]}),a("label",{children:[a("span",{children:"X offset"}),a("input",{type:"number",name:"x-offset",value:e.xOffset,onInput:r=>{e.xOffset=r.target.valueAsNumber,_()},min:"-255",max:"255"})]}),a("label",{children:[a("span",{children:"Y offset"}),a("input",{type:"number",name:"y-offset",value:e.yOffset,onInput:r=>{e.yOffset=r.target.valueAsNumber,_()},min:"-255",max:"255"})]}),a("label",{children:[a("span",{children:"X Advance"}),a("input",{type:"number",name:"x-advance",value:e.xAdvance,onInput:r=>{e.xAdvance=r.target.valueAsNumber,_()},min:"0",max:"255"})]}),a(ee,{glyph:e,onChange:_})]})}function ee({glyph:e,onChange:t}){const[,n]=E(0),i=()=>{n(_=>_+1),t==null||t()};return a("table",{id:"glyph",children:a("tbody",{children:e.gfx.map((_,r)=>a("tr",{children:_.map((l,h)=>a("td",{children:a("input",{type:"checkbox",checked:!!l,onChange:u=>{e.setPixel(h,r,u.target.checked),i()},onMouseLeave:u=>{u.buttons&&(e.setPixel(h,r,!u.target.checked),i())}})},h))},r))})})}function ne({font:e,refreshKey:t}){const n=zt(null),[i,_]=E("The quick brown fox jumps over the lazy dog");return jt(()=>{var f;const r=n.current;if(!r)return;const l=r.getContext("2d");if(!l)return;const h=10,u=2,s=e.yAdvance,p=i.split(`
`),o=Math.max(...p.map(g=>{let x=0;for(let y=0;y<g.length;y++){const d=e.getGlyph(g.charCodeAt(y));x+=(d==null?void 0:d.xAdvance)||0}return x}));r.width=(o+h*2)*u,r.height=(p.length*s+h*2)*u,l.fillStyle="#000",l.fillRect(0,0,r.width,r.height),l.fillStyle="#fff",l.scale(u,u);let c=s;for(const g of p){let x=h;for(let y=0;y<g.length;y++){const d=e.getGlyph(g.charCodeAt(y));if(d)for(let m=0;m<d.height;m++)for(let k=0;k<d.width;k++)(f=d.gfx[m])!=null&&f[k]&&l.fillRect(x+k+d.xOffset,c+m+d.yOffset,1,1);x+=(d==null?void 0:d.xAdvance)||0}c+=s}},[e,i,t]),a("fieldset",{children:[a("legend",{children:"Preview"}),a("textarea",{rows:3,value:i,onInput:r=>_(r.target.value)}),a("canvas",{ref:n})]})}async function ie(){const e=q.fromString(await fetch("./fonts/test.h").then(t=>t.text()));Wt(a(Jt,{initialFont:e}),document.body)}ie();
